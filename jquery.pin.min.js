!function (t) { "use strict"; t.fn.pin = function (s) { var o = 0, i = [], e = !1, a = t(window); s = s || {}; var n = function () { for (var o = 0, n = i.length; o < n; o++) { var p = i[o]; if (s.minWidth && a.width() <= s.minWidth) p.parent().is(".pin-wrapper") && p.unwrap(), p.css({ width: "", left: "", top: "", position: "" }), s.activeClass && p.removeClass(s.activeClass), e = !0; else { e = !1; var r = s.containerSelector ? p.closest(s.containerSelector) : t(document.body), c = p.offset(), d = r.offset(), l = p.offsetParent().offset(); p.parent().is(".pin-wrapper") || p.wrap("<div class='pin-wrapper'>"); var f = t.extend({ top: 0, bottom: 0 }, s.padding || {}); 0 != p.outerWidth() && 0 != p.outerHeight() || p.css({ width: "auto", height: "auto" }), p.data("pin", { pad: f, from: (s.containerSelector ? d.top : c.top) - f.top, to: d.top + r.height() - p.outerHeight() - f.bottom, end: d.top + r.height(), parentTop: l.top }), p.is(":visible") && (p.css({ width: p.outerWidth() }), p.parent().css("height", p.outerHeight())) } } }, p = function () { if (!e) { o = a.scrollTop(); for (var n = [], p = 0, r = i.length; p < r; p++) { var c = t(i[p]), d = c.data("pin"); if (d) { n.push(c); var l = d.from - d.pad.bottom, f = d.to - d.pad.top; l + c.outerHeight() > d.end ? c.css("position", "") : l < o && f > o ? ("fixed" != c.css("position") && c.css({ left: c.offset().left, top: d.pad.top }).css("position", "fixed"), s.activeClass && c.addClass(s.activeClass)) : o >= f ? (c.css({ left: "", top: f - d.parentTop + d.pad.top }).css("position", "absolute"), s.activeClass && c.addClass(s.activeClass)) : (c.css({ position: "", top: "", left: "" }), s.activeClass && c.removeClass(s.activeClass)) } } i = n } }, r = function () { n(), p() }; return this.each(function () { var s = t(this), o = t(this).data("pin") || {}; o && o.update || (i.push(s), t("img", this).one("load", n), o.update = r, t(this).data("pin", o)) }), a.scroll(p), a.resize(function () { n() }), n(), a.load(r), this } }(jQuery);